<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TubeKidsV1 - Perfiles</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../public/css/admin.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<script src="../public/js/crudProfile.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const token = localStorage.getItem('token');
        /Obtener el id del usuario jwt decode/
        const data = JSON.parse(atob(token.split('.')[1]));
        GetProfiles(data.userId);
        document.getElementById('userId').value = data.userId;
    });
</script>


<body>
    <!-- Formulario para crear un perfil -->
    <hr>
    <h2>Crear Perfil</h2>
    <hr>
    <form id="formCreatePerfil">
        <input type="hidden" id="userId">
        <label for="fullname">Nombre Completo:</label>
        <input type="text" id="fullname" name="name" required>
        <br>
        <label for="pin">PIN:</label>
        <input type="pin" id="pin" name="pin" required pattern="/^[0-9]{1,6}$/"
            title="Solo se permiten números y máximo 6 dígitos" maxlength="6">
        <br>

        <label for="avatarProfile">Avatar:</label>
        <div id="characterImages" name="avatar" class="carousel">
            <img src="" alt="" id="img">
        </div>
        <input type="hidden" id="AvatarUrl" name="avatarUrl">
        </div>
        <br>
        <label for="age">Edad:</label>
        <input type="number" id="age" name="age" required min="1" step="1">
        <br>
        <button class="btnProfile" type="button" onclick="createProfiles()">Crear Perfil</button>
    </form>

    <br>
    <!-- Tabla para mostrar la lista de perfiles -->
    <hr>
    <h2>Lista y gestión de Perfiles</h2>
    <hr>
    <br>
    <table id="tablePerfiles">
        <thead>
            <tr>
                <th>Nombre Completo</th>
                <th>Pin</th>
                <th>Avatar</th>
                <th>Edad</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody id="tbodyPerfiles">

        </tbody>
    </table>

    <div id="paginacionPerfiles"></div>
    <script src="../public/js/avatarsProfile.js"></script>
</body>

</html>